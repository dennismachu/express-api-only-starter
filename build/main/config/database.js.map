{"version":3,"sources":["../../../src/main/config/database.js"],"names":["connected","chalk","bold","cyan","error","yellow","disconnected","red","termination","magenta","DB_URL","process","env","NODE_ENV","keys","DB_URL_PRODUCTION","DB_URL_DEVELOPMENT","database","mongoose","connect","useCreateIndex","useNewUrlParser","useFindAndModify","useUnifiedTopology","connection","on","logger","info","console","log","err","close","exit"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AAEA,IAAMA,SAAS,GAAGC,kBAAMC,IAAN,CAAWC,IAA7B;AACA,IAAMC,KAAK,GAAGH,kBAAMC,IAAN,CAAWG,MAAzB;AACA,IAAMC,YAAY,GAAGL,kBAAMC,IAAN,CAAWK,GAAhC;AACA,IAAMC,WAAW,GAAGP,kBAAMC,IAAN,CAAWO,OAA/B;AAEA,IAAMC,MAAM,GACVC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GACIC,WAAKC,iBADT,GAEID,WAAKE,kBAHX;;AAKO,IAAMC,QAAQ,GAAG,SAAXA,QAAW,GAAM;AAC5BC,uBAASC,OAAT,CAAiBT,MAAjB,EAAyB;AACvBU,IAAAA,cAAc,EAAE,IADO;AAEvBC,IAAAA,eAAe,EAAE,IAFM;AAGvBC,IAAAA,gBAAgB,EAAE,KAHK;AAIvBC,IAAAA,kBAAkB,EAAE;AAJG,GAAzB;;AAOAL,uBAASM,UAAT,CAAoBC,EAApB,CAAuB,WAAvB,EAAoC,YAAY;AAC9CC,sBAAOC,IAAP,CAAY,qCAAZ;;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY7B,SAAS,CAAC,qCAAD,CAArB;AACD,GAHD;;AAKAkB,uBAASM,UAAT,CAAoBC,EAApB,CAAuB,OAAvB,EAAgC,UAAUK,GAAV,EAAe;AAC7CF,IAAAA,OAAO,CAACC,GAAR,CACEzB,KAAK,CAAC,6CAA6C0B,GAA7C,GAAmD,QAApD,CADP;AAGD,GAJD;;AAMAZ,uBAASM,UAAT,CAAoBC,EAApB,CAAuB,cAAvB,EAAuC,YAAY;AACjDG,IAAAA,OAAO,CAACC,GAAR,CAAYvB,YAAY,CAAC,6CAAD,CAAxB;AACD,GAFD;;AAIAK,EAAAA,OAAO,CAACc,EAAR,CAAW,QAAX,EAAqB,YAAY;AAC/BP,yBAASM,UAAT,CAAoBO,KAApB,CAA0B,YAAY;AACpCH,MAAAA,OAAO,CAACC,GAAR,CACErB,WAAW,CACT,4EADS,CADb;AAKAG,MAAAA,OAAO,CAACqB,IAAR,CAAa,CAAb;AACD,KAPD;AAQD,GATD;AAUD,CAjCM","sourcesContent":["import 'dotenv/config'\nimport mongoose from 'mongoose'\nimport chalk from 'chalk'\nimport {keys} from './keys'\nimport logger from '../logger/index'\n\nconst connected = chalk.bold.cyan\nconst error = chalk.bold.yellow\nconst disconnected = chalk.bold.red\nconst termination = chalk.bold.magenta\n\nconst DB_URL =\n  process.env.NODE_ENV === 'production'\n    ? keys.DB_URL_PRODUCTION\n    : keys.DB_URL_DEVELOPMENT\n\nexport const database = () => {\n  mongoose.connect(DB_URL, {\n    useCreateIndex: true,\n    useNewUrlParser: true,\n    useFindAndModify: false,\n    useUnifiedTopology: true,\n  })\n\n  mongoose.connection.on('connected', function () {\n    logger.info('Mongoose default connection is open')\n    console.log(connected('Mongoose default connection is open'))\n  })\n\n  mongoose.connection.on('error', function (err) {\n    console.log(\n      error('Mongoose default connection has occured ' + err + ' error'),\n    )\n  })\n\n  mongoose.connection.on('disconnected', function () {\n    console.log(disconnected('Mongoose default connection is disconnected'))\n  })\n\n  process.on('SIGINT', function () {\n    mongoose.connection.close(function () {\n      console.log(\n        termination(\n          'Mongoose default connection is disconnected due to application termination',\n        ),\n      )\n      process.exit(0)\n    })\n  })\n}\n"],"file":"database.js"}